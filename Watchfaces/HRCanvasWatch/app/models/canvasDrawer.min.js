define({name:"models/canvasDrawer",requires:["core/event","core/storage/idb"],def:function(ea){function T(a,b,c,d,g,f,e){a.save();a.beginPath();a.lineWidth=f;null!==h&&null==c&&(c=h);e||(a.globalAlpha=n);a.arc(b.getCenter().x,b.getCenter().y,b.getRadius(),0,2*Math.PI);null!==d&&(a.fillStyle=d,a.fill());g&&(a.strokeStyle=c,a.stroke());a.closePath();a.restore()}function U(a,b,c,d,g,f,e,p){a.save();"undefined"===typeof g&&(g=!0);"undefined"===typeof c&&(c=5);if("number"===typeof c)c={tl:c,tr:c,br:c,
bl:c};else{p={tl:0,tr:0,br:0,bl:0};for(var r in p)c[r]=c[r]||p[r]}a.beginPath();a.globalAlpha=n;a.moveTo(b.getX()+c.tl,b.getY());a.lineTo(b.getX()+b.getWidth()-c.tr,b.getY());a.quadraticCurveTo(b.getX()+b.getWidth(),b.getY(),b.getX()+b.getWidth(),b.getY()+c.tr);a.lineTo(b.getX()+b.getWidth(),b.getY()+b.getHeight()-c.br);a.quadraticCurveTo(b.getX()+b.getWidth(),b.getY()+b.getHeight(),b.getX()+b.getWidth()-c.br,b.getY()+b.getHeight());a.lineTo(b.getX()+c.bl,b.getY()+b.getHeight());a.quadraticCurveTo(b.getX(),
b.getY()+b.getHeight(),b.getX(),b.getY()+b.getHeight()-c.bl);a.lineTo(b.getX(),b.getY()+c.tl);a.quadraticCurveTo(b.getX(),b.getY(),b.getX()+c.tl,b.getY());a.closePath();d&&(a.fillStyle=e,a.fill());null!==h&&null==f&&(f=h);g&&(a.strokeStyle=f,a.stroke());a.restore()}function V(a,b,c,d,g,f,e){"undefined"!==typeof e?("undefined"!==typeof e.font&&(u=e.font),"undefined"!==typeof e.align&&(x=e.align),"undefined"!==typeof e.stroke&&(D=e.stroke),"undefined"!==typeof e.gradient&&(L=e.gradient)):(u="FutureNow",
e={},L=D=!1);k=0;a.save();a.beginPath();a.font=g+'px "'+u+'"';a.textAlign="right";a.textBaseline="middle";L&&M(a,f,e);a.globalAlpha=n;k+=c;l=b.hour;D?(a.strokeStyle=f,a.strokeText(l,k,d)):a.fillText(l,k,d);a.textAlign="center";l=":";k+=.25*g;D?(a.strokeStyle=f,a.strokeText(l,k,d)):a.fillText(l,k,d);a.textAlign="center";l=10>b.minute?"0"+b.minute:b.minute;k+=.8*g;D?(a.strokeStyle=f,a.strokeText(l,k,d)):a.fillText(l,k,d);a.closePath();a.restore()}function fa(){C=E}function M(a,b,c){a.fillStyle="undefined"!==
typeof c.gradient?h:b}function W(a){t=a.detail}var ha=ea.core.event,F,N,O,X,Y,Z,aa,l,u,x,G=0,ba,k=0,L=null,h=null,n=1,H=!1,I=!1,D=!1,v=null;v=null;var E={x:180,y:180},P={x:180,y:180},C={x:180,y:180},ca,da,y,z,q,A=0,J=0,K=0,B=0,Q,R,S=0,t="ice",m=null,w=0;return{init:function(){ha.on({"views.radial.changeTheme":W,"models.motion.reset":fa});tizen.preference.exists("theme")&&(t=tizen.preference.getValue("theme"))},renderCircle:T,renderCircleShadows:function(a,b,c,d){var g;for(g=1;g<=d;g++){var f=c.a-
g/d*c.a;0<=f&&(f="rgba("+c.r+","+c.g+","+c.b+","+f+")",T(a,new Circle(b.getCenter().x,b.getCenter().y,b.getRadius()+g),f,null,!0,1))}},renderNeedle:function(a,b,c,d,g,f){F=a.canvas.width/2;N=a.canvas.width/2;O=a.canvas.height/2;X=F*Math.cos(b)*c;Y=F*Math.sin(b)*c;Z=F*Math.cos(b)*d;aa=F*Math.sin(b)*d;a.save();a.beginPath();a.lineWidth=g;null===h&&(h=a.createLinearGradient(0,0,360,360),h.addColorStop(0,"rgb(30,87,153)"),h.addColorStop(.3,"rgb(41,137,216)"),h.addColorStop(.6,"rgb(32,124,202)"),h.addColorStop(1,
"rgb(125,185,232)"));a.strokeStyle=h;a.moveTo(N+X,O+Y);a.lineTo(N+Z,O+aa);a.stroke();a.closePath();a.restore()},renderText:function(a,b,c,d,g,f,e){"undefined"!==typeof e?("undefined"!==typeof e.font&&(u=e.font),"undefined"!==typeof e.align&&(x=e.align),"undefined"!==typeof e.rotate&&G++):(u="Courier",x="center",e={});a.save();a.font=g+'px "'+u+'"';a.textAlign=x;a.textBaseline="middle";M(a,f,e);a.globalAlpha=n;a.fillText(b,c,d);a.restore()},renderImage:function(a,b,c,d){b.onload=function(){a.save();
a.drawImage(b,c,d);a.restore()}},renderWeather:function(a,b,c,d,g,f){a.save();a.beginPath();a.font=g+"px artill_clean_icons";a.textAlign="center";a.textBaseline="middle";a.fillStyle=f;a.fillText(b,c,d);a.globalAlpha=n;a.closePath();a.restore()},renderTime:function(a,b,c,d,g,f,e){k=0;a.save();a.beginPath();a.font=g+'px "FutureNow"';a.textAlign="right";a.textBaseline="middle";a.fillStyle=f;k+=c;l=b.hour;a.fillText(l,k,d);a.closePath();a.beginPath();a.textAlign="center";l=":";k+=g/2;a.fillText(l,k,d);
a.closePath();a.beginPath();a.textAlign="center";l=10>b.minute?"0"+b.minute:b.minute;k+=g;a.fillText(l,k,d);a.closePath();a.beginPath();a.textAlign="center";l=":";k+=g;a.fillText(l,k,d);a.beginPath();a.textAlign="center";l=10>b.second?"0"+b.second:b.second;k+=g;a.fillText(l,k,d);a.closePath();a.restore()},renderTimeBis:V,renderTimeBisShadows:function(a,b,c,d,g,f,e){var p=1;for(p;p<=e;p++){var r=f.a-p/e*f.a;r="rgba("+f.r+","+f.g+","+f.b+","+r+")";V(a,b,c-p,d-p,g+(p+1),r,{stroke:!0})}},roundRect:U,
roundRectShadows:function(a,b,c,d,g){var f;for(f=1;f<=g;f++){var e=d.a-f/g*d.a;e="rgba("+d.r+","+d.g+","+d.b+","+e+")";U(a,new Shape(b.getX()-f,b.getY()-f,b.getWidth()+2*f,b.getHeight()+2*f),c,!1,!0,e)}},drawPulse:function(a,b,c,d,g){a.save();a.beginPath();ba=c-15*Math.abs(Math.cos(2*G)*Math.sin(4*G));a.arc(b.x,b.y,ba,0,2*Math.PI,!1);a.closePath();a.fillStyle="#006699";a.fill();a.restore();G+=Math.PI/180},renderTextGradient:function(a,b,c,d,g,f,e){"undefined"!==typeof e?("undefined"!==typeof e.font&&
(u=e.font),"undefined"!==typeof e.align&&(x=e.align),"undefined"!==typeof e.rotate&&G++):(u="Courier",x="center",e={});a.save();a.font=g+'px "'+u+'"';M(a,f,e);a.globalAlpha=n;a.textAlign=x;a.textBaseline="middle";a.fillText(b,c,d);a.restore()},renderBackground:function(a,b,c,d,g){a.save();a.beginPath();a.fillStyle="undefined"!==typeof g.gradient?v:d;a.closePath();a.fillRect(0,0,b,c);a.restore()},processMotion:function(a,b){var c=a.accelerationIncludingGravity;ca=1E3*-c.x;da=1E3*c.y;S=Math.atan2(da,
ca)+Math.PI/2;Q=180*Math.cos(S);R=180*Math.sin(S);c=a.accelerationIncludingGravity;C.x=Math.min(Math.round(E.x+4*c.x),250);C.y=Math.min(Math.round(E.y-4*c.y),250)+30;v=b.createRadialGradient(C.x,C.y,0,180,180,180);v.addColorStop(0,"rgba(0, 0, 0,1)");v.addColorStop(.3,"rgba(0, 0, 0,0.3)");v.addColorStop(.83,"rgba(0,0,0,0.4)");v.addColorStop(.91,"rgba(5,5,5,1)");v.addColorStop(.98,"rgba(40,40,40,1)");h=b.createLinearGradient(180-Q,360-R,180+Q,360+R);"ice"==t?(h.addColorStop(1,"rgb(38,55,180)"),h.addColorStop(.6,
"rgb(41,137,216)"),h.addColorStop(.3,"rgb(22,114,185)"),h.addColorStop(0,"rgb(192,221,243)")):"fire"==t?(h.addColorStop(1,"rgb(255,90,2)"),h.addColorStop(.6,"rgb(255,150,53)"),h.addColorStop(.3,"rgb(248,181,0)"),h.addColorStop(0,"rgb(249,234,194)")):"hisakura"==t?(h.addColorStop(1,"rgb(229,72,72)"),h.addColorStop(.6,"rgb(252,123,123)"),h.addColorStop(.3,"rgb(254,144,144)"),h.addColorStop(0,"rgb(251,232,232)")):"metal"==t&&(h.addColorStop(1,"rgb(101,101,107)"),h.addColorStop(.6,"rgb(149,149,149)"),
h.addColorStop(.3,"rgb(190,190,190)"),h.addColorStop(0,"rgb(244,244,244)"))},renderGrid:function(a,b,c,d){a.save();z=y=0;a.lineWidth=c;a.strokeStyle="rgba(70, 70, 70,0.2)";for(q=30;360>q;q+=30)y=q,null!==d.motion&&(A=6*-d.motion.accelerationIncludingGravity.x,J=180-6*d.motion.accelerationIncludingGravity.y),A=180>q?q/100*A:(360-q)/100*A,a.translate(y,z),a.beginPath(),a.moveTo(-3,0),a.quadraticCurveTo(~~A+3,~~J,-3,360),a.stroke(),a.beginPath(),a.moveTo(0,0),a.quadraticCurveTo(~~A,~~J,0,360),a.stroke(),
a.beginPath(),a.moveTo(3,0),a.quadraticCurveTo(~~A-3,~~J,3,360),a.stroke(),a.translate(-y,-z);z=y=0;for(q=30;360>q;q+=30)z=q,null!==d.motion&&(K=180-6*d.motion.accelerationIncludingGravity.x,B=6*-d.motion.accelerationIncludingGravity.y),B=180>=q?q/100*B:(360-q)/100*B,a.translate(y,z),a.beginPath(),a.moveTo(0,-3),a.quadraticCurveTo(~~K,~~B+3,360,-3),a.stroke(),a.beginPath(),a.moveTo(0,0),a.quadraticCurveTo(~~K,~~B,360,0),a.stroke(),a.beginPath(),a.moveTo(0,-3),a.quadraticCurveTo(~~K,~~B-3,360,3),a.stroke(),
a.translate(-y,-z);a.restore()},getRadialGradientCoords:function(){return C},changeTheme:W,getAmbiantGradient:function(a){m=a.createLinearGradient(0,0,360,0);"ice"==t?(m.addColorStop(1,"rgb(38,55,180)"),m.addColorStop(.6,"rgb(68,106,255)"),m.addColorStop(.3,"rgb(145,214,242)"),m.addColorStop(0,"rgb(154,231,244)")):"fire"==t?(m.addColorStop(1,"rgb(255,90,2)"),m.addColorStop(.6,"rgb(255,150,53)"),m.addColorStop(.3,"rgb(248,181,0)"),m.addColorStop(0,"rgb(249,234,194)")):"hisakura"==t?(m.addColorStop(1,
"rgb(229,72,72)"),m.addColorStop(.6,"rgb(252,123,123)"),m.addColorStop(.3,"rgb(254,144,144)"),m.addColorStop(0,"rgb(251,232,232)")):"metal"==t&&(m.addColorStop(1,"rgb(101,101,107)"),m.addColorStop(.6,"rgb(149,149,149)"),m.addColorStop(.3,"rgb(190,190,190)"),m.addColorStop(0,"rgb(244,244,244)"));return m},setOpacity:function(a){n=a},startFade:function(){H=!0;w=0;n=1},fade:function(a,b){!0===H&&(w+=a,n=1-w/b,0>=n&&(H=!1,w=n=0))},isFading:function(){return H},startShow:function(){I=!0;n=w=0},show:function(a,
b){!0===I&&(w+=a,n=w/b,1<=n&&(I=!1,n=1,w=0))},isShowing:function(){return I},setClassAndWaitForTransition:setClassAndWaitForTransition,scrollTop:function(a,b,c){function d(r){if(null!==p){e+=Math.PI*(r-p)/c;if(e>=Math.PI)return a.scrollTop=g+b;a.scrollTop=g+f-f*Math.cos(e)}p=r;window.requestAnimationFrame(d)}var g=a.scrollTop;console.log(a.scrollTop);console.log(b);var f=b/2,e=0,p=null;window.requestAnimationFrame(d)},createCanvas:function(a){var b=document.getElementById(a.id);b.width=a.width;b.height=
a.height;a=b.getContext("2d");return{canvas:b,context:a}},maskCanvas:function(a,b,c){c.context.drawImage(b.canvas,0,0,b.canvas.width,b.canvas.height);c.context.globalCompositeOperation="source-atop";c.context.drawImage(a.canvas,0,0);b=a.context;a=a.canvas;b.filter="blur(2px)";b.drawImage(a,0,0);b.filter="none"},processWidgetHtml:function(a){var b=document.getElementById("down"),c=document.getElementById("widget_holder");c.insertBefore(a,b);return c},clearWidgetHtml:function(a,b){a.removeChild(b)},
getGravityCenter:function(a){P.x=Math.round(E.x+4*a.accelerationIncludingGravity.x);P.y=Math.round(E.y-4*a.accelerationIncludingGravity.y);return P}}}});