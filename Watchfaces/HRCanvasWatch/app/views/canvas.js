define({name:"views/canvas",requires:"core/event core/systeminfo views/radial helpers/date helpers/text models/motion models/settings models/canvasDrawer models/heartRate models/location models/pressure models/weather models/pedometer models/calendar".split(" "),def:function(t){var l;function Ra(a,f){navigator.vibrate(0);Date.now();x||(null==a.getAttribute("data-dblclick")?(a.setAttribute("data-dblclick",1),setTimeout(function(){1==a.getAttribute("data-dblclick")&&(console.log("-----------\x3e single <-----------"),
Sa(a,f));a.removeAttribute("data-dblclick")},300)):(a.removeAttribute("data-dblclick"),console.log("-----------\x3e double <-----------"),E=qa(a,f),v.isInSurface(E,0)&&!q.getOpen()&&u.isForecastFound()&&ea()))}function ea(){y?L=!1:fa=!1;v.animate()}function ra(a){switch(a){case "fire":document.querySelector(g).style.setProperty("--color1","rgb(255,150,53)");document.querySelector(g).style.setProperty("--color2","rgb(249,234,194)");break;case "hisakura":document.querySelector(g).style.setProperty("--color1",
"rgb(229,72,72)");document.querySelector(g).style.setProperty("--color2","rgb(251,232,232)");break;case "ice":document.querySelector(g).style.setProperty("--color1","rgb(24,82,129)");document.querySelector(g).style.setProperty("--color2","rgb(192,221,243)");break;default:document.querySelector(g).style.setProperty("--color1","rgb(149,149,149)"),document.querySelector(g).style.setProperty("--color2","rgb(244,244,244)")}}function Sa(a,f){E=qa(a,f);if(X.isInSurface(E,10))c.startFade(),Ta(f),q.setOpen();
else if(C.isInSurface(E,0)&&!L&&!q.getOpen()&&!F&&B.hasVEvents())c.startFade(),Y=B.getCalendarHtml(),G=c.processWidgetHtml(Y),setClassAndWaitForTransition(G,"on","opacity").then(function(){g="#calendar";ra(M);setClassAndWaitForTransition(Y,"on","opacity").then(function(){setTimeout(function(){F=!0},100);ha(Y,H,"#calendar")})}),document.querySelectorAll("#calendar .event").forEach(function(h){h.addEventListener("click",function(ia){setClassAndWaitForTransition(h,"event click","color").then(function(){h.setAttribute("class",
"event");c.startShow();g=null;H("#calendar")})})});else if(Z.isInSurface(E,5)&&!q.getOpen())tizen.application.launch("com.samsung.shealth",null,null);else if(v.isInSurface(E,0)&&!q.getOpen()&&u.isForecastFound()&&!F){c.startFade();var n=u.getWeatherHtml();G=c.processWidgetHtml(n);setClassAndWaitForTransition(G,"on","opacity").then(function(){g="#weather";ra(M);setClassAndWaitForTransition(n,"on","opacity").then(function(){document.querySelector(g+".on");setTimeout(function(){F=!0},50);ha(document.querySelector(".lastcall"),
H,"#weather");ha(document.querySelector(".overflower"),H,"#weather")})});document.querySelectorAll("#weather div.block").forEach(function(h){h.addEventListener("click",function(ia){setClassAndWaitForTransition(h,"block click","color").then(function(){var sa=document.querySelector("#overflower-back");sa.innerHTML="";var Ua=u.getElementDetails(h.getAttribute("block-id"));sa.appendChild(Ua);setClassAndWaitForTransition(h,"block","color").then(function(){Q=!0;setClassAndWaitForTransition(document.getElementById("weather"),
"flip","transform").then(function(){setTimeout(function(){Q=!1;R=!0;Va(document.querySelector("#overflower-back"),".overflower-back")},50)})})})})})}}function Va(a,f){a.addEventListener("click",function(n){var h=document.querySelector("#overflower-back");if(n.target==h||hasSomeParentTheClass(n.target,"overflower-back"))Q=!0,setTimeout(function(){var ia=document.getElementById("weather");setClassAndWaitForTransition(ia,"on","transform").then(function(){for(R=Q=!1;h.firstChild;)h.removeChild(h.lastChild)})},
50)})}function ha(a,f,n){a.addEventListener("click",function(h){if(h.target===this||h.target==document.querySelector("#overflower"))c.startShow(),g=null,f(n)})}function H(a){if(F){F=!1;G=document.querySelector("#widget_holder");var f=document.querySelector(a);setClassAndWaitForTransition(f,"off","opacity").then(function(){R=!1;setClassAndWaitForTransition(G,"","opacity").then(function(){c.clearWidgetHtml(G,f)})})}}function ta(){c.startShow()}function Ta(a){q.getMenu().open();ja.fire("openRadialMenu",
a)}function qa(a,f){var n=a.getBoundingClientRect();return{x:f.clientX-n.left,y:f.clientY-n.top}}function ua(){w=new Date;va=w.getHours();wa=w.getMinutes();xa=w.getSeconds();I.hour=va;I.minute=wa;I.second=xa;I.date=ya}function ka(a){x=!1;ua();za=Date.now();Wa(za);S=(a-Aa)/1E3;Aa=a;v.isAnimating()&&(y?(v.shrinkRight(S,250,100,.3),v.isAnimating()||(fa=!0,y=y?!1:!0)):(v.growRight(S,100,250,.3),v.isAnimating()||(y=y?!1:!0,L=!0)));c.isFading()&&c.fade(S,.5);c.isShowing()&&(c.show(S,.5),c.isShowing());
ya=w.getDate();x||(a=z.length,z=z.filter(function(f){f.setPoA(r);return f.move()}),N&&500>a&&aa(Math.round((500-a)/10),J));d.context.globalAlpha=.05;d.context.fillStyle="#000000";d.context.fillRect(0,0,d.canvas.width,d.canvas.height);d.context.globalAlpha=1;c.renderBackground(d.context,d.canvas.width,d.canvas.height,"black",{gradient:!0,motion:k});c.renderCircle(d.context,new Circle(b.x,b.y,e-2),null,null,!0,2,!0);Ba&&(c.renderCircleShadows(d.context,X,{r:15,g:15,b:15,a:.7},5),c.renderCircle(d.context,
X,"#000000","rgba(10, 10, 10,0.7)",!1,2,!1),c.roundRect(d.context,Ca,3,!1,!0,null,"rgba(0, 0, 0,0.8)"),c.roundRect(d.context,Da,3,!1,!0,null,"rgba(0, 0, 0,0.8)"),c.roundRect(d.context,Ea,3,!1,!0,null,"rgba(0, 0, 0,0.8)"),c.roundRect(d.context,Fa,3,!1,!0,null,"rgba(0, 0, 0,0.8)"),c.roundRect(d.context,new Shape(b.x-112,b.y-63,85,58),10,!0,!1,null,"rgba(5, 5, 5,0.7)"),c.renderTextGradient(d.context,"Altitude",b.x-.19*e,b.y-.3*e,16,"#c9c9c9",{font:"FutureNow",align:"right",gradient:!0,motion:k}),c.renderText(d.context,
Ga,b.x-.19*e,b.y-.23*e,16,"#c9c9c9",{font:"FutureNow",align:"right"}),c.renderTextGradient(d.context,"Pressure",b.x-.19*e,b.y-.16*e,16,"#c9c9c9",{font:"FutureNow",align:"right",gradient:!0,motion:k}),c.renderText(d.context,Ha,b.x-.19*e,b.y-.09*e,16,"#c9c9c9",{font:"FutureNow",align:"right"}),c.renderText(d.context,Math.round(Ia)+"%",b.x+94,b.y-.4*e,17,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}),c.renderText(d.context,w.getDate()+"/"+(w.getMonth()+1)+"/"+w.getFullYear(),b.x+108,
b.y-50,25,"#c9c9c9",{font:"FutureNow",align:"right",gradient:!0,motion:k}),c.renderTimeBis(d.context,I,b.x+33,b.y-23,53,"#c9c9c9",{gradient:!0,motion:k,stroke:!1}),c.renderText(d.context,I.second,b.x+138,b.y-16,25,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}),c.roundRectShadows(d.context,v,10,{r:10,g:10,b:10,a:.7},5),c.roundRect(d.context,v,10,!0,!1,null,"rgba(8, 8, 8,0.7)"),Xa(L),fa&&(c.roundRectShadows(d.context,C,10,{r:10,g:10,b:10,a:.7},5),c.roundRect(d.context,C,10,!0,!1,
null,"rgba(8, 8, 8,0.7)"),c.renderText(d.context,"Events",C.getCoords().x+50,C.getCoords().y+20,25,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}),c.renderText(d.context,B.getNbEvents(),C.getCoords().x+50,C.getCoords().y+50,30,"#c9c9c9",{font:"FutureNow",align:"center"})),c.renderCircleShadows(d.context,Z,{r:15,g:15,b:15,a:.7},5),c.renderCircle(d.context,Z,"#000000","rgba(10, 10, 10,0.7)",!1,1.5,!1),la&&null!==K.getData().rate?c.renderText(d.context,K.getData().rate,b.x,b.y+.67*
e,25,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}):c.renderText(d.context,"-",b.x,b.y+.67*e,25,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}),!0===Ja.getActive()&&c.renderText(d.context,Ja.getData().accumulativeTotalStepCount,b.x-.3*e,b.y+.6*e,22,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}));T=requestAnimationFrame(ka)}function Xa(){m=y?{text1:{x:b.x-.38*e,y:b.y+.15*e,size:15},temp:{x:b.x-.38*e,y:b.y+.24*e,size:16},city:{x:b.x-.65*e,y:b.y+
.33*e,size:12},text2:{x:b.x-.67*e,y:b.y+.4*e,size:13},icon:{x:b.x-.58*e,y:b.y+.14*e,size:52}}:{text1:{x:b.x-.31*e,y:b.y+.16*e,size:21},temp:{x:b.x-.3*e,y:b.y+.28*e,size:22},city:{x:b.x-.65*e,y:b.y+.33*e,size:12},text2:{x:b.x-.67*e,y:b.y+.39*e,size:18},icon:{x:b.x-.56*e,y:b.y+.14*e,size:62}};u.isWeatherFound()?(ma=u.getMapping(O.weather[0].id,O.day),c.renderText(d.context,"Temp",m.text1.x,m.text1.y,m.text1.size,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0,motion:k}),c.renderText(d.context,
parseFloat(O.main.temp).toFixed(1)+"\u00b0",m.temp.x,m.temp.y,m.temp.size,"#c9c9c9",{font:"FutureNow",align:"center"}),y&&c.renderTextGradient(d.context,P.truncateBis(O.name,12,"..."),m.city.x,m.city.y,m.city.size,"#c9c9c9",{font:"FutureNow",align:"left",gradient:!0}),c.renderText(d.context,P.truncateBis(O.weather[0].main,y?12:8,"..."),m.text2.x,m.text2.y,m.text2.size,"#c9c9c9",{font:"FutureNow",align:"left",gradient:!0,motion:k})):ma=u.getMapping();c.renderText(d.context,ma,m.icon.x,m.icon.y,m.icon.size,
"#c9c9c9",{font:"artill_clean_icons",align:"center",gradient:!0,motion:k});if(u.isForecastFound()&&L){U=u.getForecast();V=b.x-18;for(var a=0;5>a;a++)Ka=(new Date(1E3*U.list[a].dt)).getHours(),c.renderText(d.context,Ka+"h",V,b.y+.15*e,15,"#c9c9c9",{font:"FutureNow",align:"center"}),c.renderText(d.context,u.getMapping(U.list[a].weather[0].id,U.list[a].day),V,b.y+.22*e,31,"#c9c9c9",{font:"artill_clean_icons",align:"center",gradient:!0,motion:k}),c.renderText(d.context,~~U.list[a].main.temp+"\u00b0",
V+3,b.y+.37*e,15,"#c9c9c9",{font:"FutureNow",align:"center"}),V+=30}}function Ya(a){}function Za(a){"undefined"!==typeof a.detail.latitude&&ba.getData()}function $a(a){}function ab(){}function bb(){}function cb(){}function db(a){Ia=100*a.detail}function eb(a){la=a.detail}function fb(a){Ha=parseFloat(a.detail.average).toFixed(0);Ga=parseFloat(a.detail.altitude).toFixed(1)}function gb(a){"undefined"!==typeof a.detail.weather&&(O=a.detail)}function La(a){ua();c.setOpacity(1);d.context.clearRect(0,0,
d.canvas.width,d.canvas.height);c.renderTimeBis(d.context,I,b.x-20+P.getRandomInt(-10,10),b.y+P.getRandomInt(-10,10),100,ca,{align:"center"});c.renderText(d.context,w.getDate()+"/"+(w.getMonth()+1)+"/"+w.getFullYear(),b.x+10+P.getRandomInt(-10,10),b.y-80+P.getRandomInt(-10,20),25,"#c9c9c9",{font:"FutureNow",align:"center",gradient:!0});la&&null!==K.getData().rate&&(c.renderCircle(d.context,new Circle(b.x,b.y+.6*e,45),"#000000","rgba(30, 30, 30,0.7)",!1,1.5,!1),c.renderText(d.context,K.getData().rate,
b.x,b.y+.6*e,30,ca,{font:"FutureNow",align:"center"}))}function hb(a){console.error(a.detail.type)}function ib(a){W.accelerationIncludingGravity=a.detail.accelerationIncludingGravity;k=W;null!==k&&c.processMotion(W,d.context);r=c.getGravityCenter(W);r.x-=na.x;r.y-=na.y;x||(q.getOpen()&&(l=1.2*(r.y-180),p=1.2*(r.x-180),-20>=l&&(l=-20),20<=l&&(l=20),-20>=p&&(p=-20),20<=p&&(p=20),document.querySelector("div.menuHolder").style.setProperty("--degx",-l+"deg"),document.querySelector("div.menuHolder").style.setProperty("--degy",
p+"deg")),1!=F||(l=1.2*(r.y-180),p=1.2*(r.x-180),-20>=l&&(l=-20),20<=l&&(l=20),-20>=p&&(p=-20),20<=p&&(p=20),null==g))||((a=document.querySelector(g),document.querySelector(g+".on"),Q||0!=R)?R&&(a.style.setProperty("--degx",-l+"deg"),a.style.setProperty("--degy",p+"deg"),a.style.setProperty("--degxFlipped",l+"deg"),a.style.setProperty("--degyFlipped",p+180+"deg")):(a.style.setProperty("--degx",-l+"deg"),a.style.setProperty("--degy",p+"deg"),a.style.setProperty("--degxFlipped",l+"deg"),a.style.setProperty("--degyFlipped",
p+180+"deg")))}function da(a){Ma&&window.clearTimeout(Ma);T&&window.cancelAnimationFrame(T);switch(a){case "Ambient":Na();x=!0;La(null);break;case "Normal":Date.now(),A.isAvailable()&&!A.isStarted()&&A.start(),x=!1,setTimeout(function(f){r=c.getGravityCenter(W);na={x:r.x-180,y:r.y-180}},500),T=requestAnimationFrame(ka)}}function Na(){A.isAvailable()&&A.isStarted()&&A.stop()}function jb(){document.getElementById("canvas-content").addEventListener("click",function(a){Ra(this,a)});window.addEventListener("timetick",
function(){x&&La()});Oa=document.getElementById("up");Pa=document.getElementById("down");Oa.addEventListener("click",function(a){document.getElementById("overflower");c.scrollTop(document.getElementById("overflower"),-220,500)});Pa.addEventListener("click",function(a){document.getElementById("overflower");c.scrollTop(document.getElementById("overflower"),220,500)});window.addEventListener("ambientmodechanged",function(a){!0===a.detail.ambientMode?(q.getOpen()&&q.closeMenu(),H(g),da("Ambient")):(da("Normal"),
c.startShow())});ja.on("visibilitychange",function(a){document.hidden?(q.getOpen()&&q.closeMenu(),H(g),!0!==x?(d.context.clearRect(0,0,d.canvas.width,d.canvas.height),c.setOpacity(0),Na()):c.setOpacity(1)):!0===x?(q.getOpen()&&q.closeMenu(),H(g),da("Ambient")):(c.startShow(),da("Normal"))});ja.on({"core.systeminfo.battery.low":ab,"core.systeminfo.battery.isCharging":bb,"core.systeminfo.battery.notCharging":cb,"core.systeminfo.battery.change":db,"models.heartRate.change":Ya,"models.heartRate.HRFound":eb,
"models.location.change":Za,"models.location.found":$a,"models.pressure.change":fb,"models.motion.change":ib,"models.motion.error":hb,"views.radial.changeTheme":kb,"views.radial.changeEffect":lb,"views.radial.close":ta,"RadialMenu.closing":ta,"models.weather.found":gb,"models.weather.forecast_found":mb,"models.calendar.hasEvent":nb});oa.listenBatteryLowState();oa.listenBatteryChange()}function nb(a){a.detail&&y&&ea()}function mb(){B.hasVEvents()||ea()}function aa(a,f){for(var n=0;n<a;n++)setTimeout(function(h){return function(){"attraction"==
f?z.push(new Particle(d.context,D)):"flower"==f?z.push(new Flower(d.context,D)):"lightspeed"==f?z.push(new LightSpeed(d.context,D)):z.push(new ParticleAlien(d.context,D))}}(n),5*n);return z.length}function Qa(a){switch(a){case "fire":D=["#ff5a02","#f8b500","#f9eac2"];break;case "hisakura":D=["#ff5151","#fc7b7b","#f9d9d9"];break;case "ice":D=["#694FB9","#6094ee","#3CFBFF"];break;default:D=["rgb(149,149,149)","rgb(190,190,190)","rgb(244,244,244)"]}}function kb(a){Qa(a.detail);M=a.detail;ca=c.getAmbiantGradient(d.context);
z=[];N=!1;aa(500,J);setTimeout(function(){N=!0},2500)}function lb(a){J=a.detail;N=!1;z=[];aa(500,J);setTimeout(function(){N=!0},2500)}function Wa(a){u.handleUpdate(a);K.handleUpdate(a);ba.handleUpdate(a);pa.handleUpdate(a);B.handleUpdate(a);B.handleFilter(a)}var P=t.helpers.text,ja=t.core.event,K=t.models.heartRate,pa=t.models.pressure,A=t.models.motion,Ja=t.models.pedometer,ba=t.models.location,u=t.models.weather,B=t.models.calendar,q=t.views.radial,c=t.models.canvasDrawer,oa=t.core.systeminfo,d,
b,e,V,Ka,la=!1,Ia=0,Ha=0,Ga=0,Ma,T,w,va,wa,xa,ya,O,U,ma,I={hour:null,minute:null,second:null,date:null},ca,za,x,k=null,W={accelerationIncludingGravity:{x:null,y:null}},z=[],N=!1,r={x:180,y:180},na={x:0,y:0},E=null,D=["#694FB9","#6094ee","#3CFBFF"];var p=l=0;var L=!1,y=!1,v,Ca,Da,Ea,Fa,X,C,Z,S=0,Aa=0,fa=!0,F=!1,Ba=!1,G=document.querySelector("#widget_holder"),Y=document.querySelector("#calendar"),g="",Oa=document.getElementById("up"),Pa=document.getElementById("down"),Q=!1,R=!1,m=null,M="ice",J="attraction";
return{init:function(){Date.now();jb();tizen.preference.exists("theme")?M=tizen.preference.getValue("theme"):tizen.preference.setValue("theme",M);tizen.preference.exists("effect")?J=tizen.preference.getValue("effect"):tizen.preference.setValue("effect",J);d=c.createCanvas({id:"canvas-content",width:360,height:360});b={x:document.body.clientWidth/2,y:document.body.clientHeight/2};e=d.canvas.width/2;c.center=b;c.watchRadius=e;ca=c.getAmbiantGradient(d.context);x=!1;v=L?new Shape(b.x-126,b.y+.06*e,250,
70):new Shape(b.x-126,b.y+.06*e,100,70);C=new Shape(b.x+26,b.y+.06*e,100,70);Ca=new Shape(b.x-16,b.y-116,13,13);Da=new Shape(b.x+3,b.y-116,13,13);Ea=new Shape(b.x-16,b.y-134,13,13);Fa=new Shape(b.x+3,b.y-134,13,13);X=new Circle(b.x,b.y-119,28);Z=new Circle(b.x,b.y+.67*e,28);Qa(M);u.setIntervalUpdate(36E5);K.setIntervalUpdate(1E4);ba.setIntervalUpdate(6E5);pa.setIntervalUpdate(6E5);B.setIntervalUpdate(6E5);B.setIntervalFilter(3E5);K.start();ba.start();A.isAvailable()&&(A.setOptions({sampleInterval:100,
maxBatchCount:1E3}),A.setChangeListener(),A.start());pa.start();oa.checkBattery();B.accessCalendars();Ba=!0;c.startShow();aa(500,J);setTimeout(function(){N=!0},2500);T=window.requestAnimationFrame(ka)}}}});